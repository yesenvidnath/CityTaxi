--Users (type; Owner, Passengers, Driver)--
CREATE TABLE Users (
    User_ID INT PRIMARY KEY,
    User_Type VARCHAR(50),
    Password VARCHAR(255),
    Email VARCHAR(100),
    First_Name VARCHAR(50),
    Last_Name VARCHAR(50),
    NIC_No VARCHAR(20),
    Address VARCHAR(255),
    User_Img VARCHAR(255)
);

--Vehicle Owner--
CREATE TABLE Vehicle_Owner (
    Vehicle_Owner_ID INT PRIMARY KEY,
    User_ID INT,
    Driving_Licence_No VARCHAR(20),
    Licence_ID INT,
    FOREIGN KEY (User_ID) REFERENCES Users(User_ID)
);

--Passengers-- 
CREATE TABLE Passengers (
    Passenger_ID INT PRIMARY KEY,
    User_ID INT,
    FOREIGN KEY (User_ID) REFERENCES Users(User_ID)
);

--License--
CREATE TABLE License (
    Licence_ID INT PRIMARY KEY,
    User_ID INT,
    NIC_Img_Front VARCHAR(255),
    NIC_Img_Back VARCHAR(255),
    Drivers_Licence_Front_ID VARCHAR(255),
    Drivers_Licence_Back_ID VARCHAR(255),
    FOREIGN KEY (User_ID) REFERENCES Users(User_ID)
);

--Drivers--
CREATE TABLE Drivers (
    Driver_ID INT PRIMARY KEY,
    User_ID INT,
    Licence_ID INT,
    Availability BOOLEAN,
    FOREIGN KEY (User_ID) REFERENCES Users(User_ID),
    FOREIGN KEY (Licence_ID) REFERENCES License(Licence_ID)
);

--Taxis--
CREATE TABLE Taxis (
    Taxi_ID INT PRIMARY KEY,
    Taxi_Type VARCHAR(50),
    Vehicle_Owner_ID INT,
    Plate_Number VARCHAR(20),
    Registration_Date DATE,
    Revenue_Licence VARCHAR(50),
    Insurance_Info VARCHAR(50),
    Revenue_Licence_Img VARCHAR(255),
    Insurance_Card_Img VARCHAR(255),
    Vehicle_Img VARCHAR(255),
    FOREIGN KEY (Vehicle_Owner_ID) REFERENCES Vehicle_Owner(Vehicle_Owner_ID)
);

--Reservations--
CREATE TABLE Reservations (
    Reservation_ID INT PRIMARY KEY,
    Taxi_ID INT,
    Start_Location VARCHAR(255),
    End_Location VARCHAR(255),
    Driver_ID INT,
    Passenger_ID INT,
    Reservation_Date DATE,
    Reservation_Time TIME,
    FOREIGN KEY (Taxi_ID) REFERENCES Taxis(Taxi_ID),
    FOREIGN KEY (Driver_ID) REFERENCES Drivers(Driver_ID),
    FOREIGN KEY (Passenger_ID) REFERENCES Passengers(Passenger_ID)
);

--Rides--
CREATE TABLE Rides (
    Ride_ID INT PRIMARY KEY,
    Taxi_ID INT,
    Driver_ID INT,
    Passenger_ID INT,
    Type VARCHAR(50), -- (DayRide, Booking)
    Start_Location VARCHAR(255),
    End_Location VARCHAR(255),
    Start_Time TIME,
    End_Time TIME,
    Start_Date DATE,
    End_Date DATE,
    Total_Distance FLOAT,
    Amount DECIMAL(10, 2),
    Status VARCHAR(50), -- (Accepted, Rejected, Canceled, Rescheduled)
    FOREIGN KEY (Taxi_ID) REFERENCES Taxis(Taxi_ID),
    FOREIGN KEY (Driver_ID) REFERENCES Drivers(Driver_ID),
    FOREIGN KEY (Passenger_ID) REFERENCES Passengers(Passenger_ID)
);

--Payments--
CREATE TABLE Payments (
    Payment_ID INT PRIMARY KEY,
    Payment_Date DATE,
    Payment_Time TIME,
    Amount DECIMAL(10, 2),
    Driver_ID INT,
    Taxi_ID INT,
    Ride_ID INT,
    FOREIGN KEY (Driver_ID) REFERENCES Drivers(Driver_ID),
    FOREIGN KEY (Taxi_ID) REFERENCES Taxis(Taxi_ID),
    FOREIGN KEY (Ride_ID) REFERENCES Rides(Ride_ID)
);

--Ratings--
CREATE TABLE Ratings (
    Rating_ID INT PRIMARY KEY,
    Rate INT,
    Comment TEXT,
    Driver_ID INT,
    Passenger_ID INT,
    FOREIGN KEY (Driver_ID) REFERENCES Drivers(Driver_ID),
    FOREIGN KEY (Passenger_ID) REFERENCES Passengers(Passenger_ID)
);

--Invoices--
CREATE TABLE Invoices (
    Invoice_ID INT PRIMARY KEY,
    Payment_ID INT,
    FOREIGN KEY (Payment_ID) REFERENCES Payments(Payment_ID)
);

--Admin--
CREATE TABLE Admin (
    Admin_ID INT PRIMARY KEY,
    User_ID INT,
    Permission VARCHAR(50),
    Description TEXT,
    FOREIGN KEY (User_ID) REFERENCES Users(User_ID)
);
